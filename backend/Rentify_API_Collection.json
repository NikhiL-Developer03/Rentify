{
  "info": {
    "name": "Rentify API Collection",
    "description": "Complete API collection for Rentify Car Rental System",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('authToken', response.data.token);",
                  "    pm.environment.set('userId', response.data.user.id);",
                  "    pm.test('User registered successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "    pm.test('User is active by default', function () {",
                  "        pm.expect(response.data.user.isActive).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john.doe@example.com\",\n  \"phone\": \"+91-9876543210\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Registers a new user. Users are created with isActive=true by default. Only an admin can deactivate a user."
          }
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('authToken', response.data.token);",
                  "    pm.environment.set('userId', response.data.user.id);",
                  "    pm.test('User logged in successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "    pm.test('User account is active', function () {",
                  "        pm.expect(response.data.user.isActive).to.be.true;",
                  "    });",
                  "}",
                  "if (pm.response.code === 403) {",
                  "    const response = pm.response.json();",
                  "    pm.test('Inactive account rejected', function () {",
                  "        pm.expect(response.success).to.be.false;",
                  "        pm.expect(response.message).to.include('inactive');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john.doe@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "Logs in a user. Returns a 403 error if the account is inactive with message 'Account is inactive. Please contact admin.'"
          }
        },
        {
          "name": "Register Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.test('Admin registered successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "    });",
                  "    console.log('Note: Manually update user in database to set IsAdmin = 1');",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Admin User\",\n  \"email\": \"admin@rentify.com\",\n  \"phone\": \"+91-9000000000\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.environment.set('adminToken', response.data.token);",
                  "    pm.test('Admin logged in successfully', function () {",
                  "        pm.expect(response.success).to.be.true;",
                  "        pm.expect(response.data.user.isAdmin).to.be.true;",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@rentify.com\",\n  \"password\": \"admin123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Get User Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    pm.test('Profile contains isActive status', function () {",
                  "        pm.expect(response.data).to.have.property('isActive');",
                  "    });",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            },
            "description": "Get the current user's profile information, including their active status (isActive field)."
          }
        },
        {
          "name": "Update User Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"phone\": \"+91-9876543211\",\n  \"address\": \"123 Main St, Mumbai\",\n  \"dl_number\": \"DL12345678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "profile"]
            }
          }
        },
        {
          "name": "Make User Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"secretKey\": \"admin_secret_key\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/make-admin",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "make-admin"]
            }
          }
        }
      ]
    },
    {
      "name": "Cars & Locations",
      "item": [
        {
          "name": "Get All Locations",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/locations",
              "host": ["{{baseUrl}}"],
              "path": ["locations"]
            }
          }
        },
        {
          "name": "Search Cars - All",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cars",
              "host": ["{{baseUrl}}"],
              "path": ["cars"]
            }
          }
        },
        {
          "name": "Search Cars - With Filters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cars?city=Mumbai&start_date=2023-09-10&end_date=2023-09-15&category=SUV",
              "host": ["{{baseUrl}}"],
              "path": ["cars"],
              "query": [
                {
                  "key": "city",
                  "value": "Mumbai"
                },
                {
                  "key": "start_date",
                  "value": "2023-09-10"
                },
                {
                  "key": "end_date",
                  "value": "2023-09-15"
                },
                {
                  "key": "category",
                  "value": "SUV"
                }
              ]
            }
          }
        },
        {
          "name": "Get Car Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cars/1",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "1"]
            }
          }
        },
        {
          "name": "Check Car Availability",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cars/1/availability?start_date=2023-09-10&end_date=2023-09-15",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "1", "availability"],
              "query": [
                {
                  "key": "start_date",
                  "value": "2023-09-10"
                },
                {
                  "key": "end_date",
                  "value": "2023-09-15"
                }
              ]
            }
          }
        },
        {
          "name": "Get Car Reviews",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/cars/{{carId}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["cars", "{{carId}}", "reviews"]
            }
          }
        }
      ]
    },
    {
      "name": "Bookings",
      "item": [
        {
          "name": "Create Booking",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"car_id\": 1,\n  \"start_date\": \"2023-09-10\",\n  \"end_date\": \"2023-09-15\",\n  \"pickup_location_id\": 1,\n  \"dropoff_location_id\": 1,\n  \"additional_drivers\": 0,\n  \"child_seats\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["bookings"]
            }
          }
        },
        {
          "name": "Get My Bookings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/bookings/my",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "my"]
            }
          }
        },
        {
          "name": "Get Booking Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "{{bookingId}}"]
            }
          }
        },
        {
          "name": "Get User Bookings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/users/{{userId}}/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{userId}}", "bookings"]
            }
          }
        },
        {
          "name": "Cancel Booking",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "{{bookingId}}", "cancel"]
            }
          }
        },
        {
          "name": "Complete Booking (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/bookings/{{bookingId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["bookings", "{{bookingId}}", "complete"]
            }
          }
        }
      ]
    },
    {
      "name": "Payments",
      "item": [
        {
          "name": "Register Payment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"booking_id\": \"{{bookingId}}\",\n  \"provider\": \"Razorpay\",\n  \"provider_payment_id\": \"pay_test123\",\n  \"amount\": 5400.00,\n  \"status\": \"succeeded\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            }
          }
        },
        {
          "name": "Get Payment Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/1",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "1"]
            }
          }
        },
        {
          "name": "Get Booking Payments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments/booking/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "booking", "{{bookingId}}"]
            }
          }
        },
        {
          "name": "Get All Payments (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/payments",
              "host": ["{{baseUrl}}"],
              "path": ["payments"]
            }
          }
        },
        {
          "name": "Update Payment Status (Admin)",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"succeeded\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payments/1/status",
              "host": ["{{baseUrl}}"],
              "path": ["payments", "1", "status"]
            }
          }
        }
      ]
    },
    {
      "name": "Reviews",
      "item": [
        {
          "name": "Create Review",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 4.5,\n  \"comment\": \"The car was in excellent condition. Great experience!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "{{bookingId}}"]
            }
          }
        },
        {
          "name": "Update Review",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"rating\": 5.0,\n  \"comment\": \"Updated: The car was perfect and the service was excellent!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/reviews/1",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "1"]
            }
          }
        },
        {
          "name": "Get All Reviews (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reviews",
              "host": ["{{baseUrl}}"],
              "path": ["reviews"]
            }
          }
        },
        {
          "name": "Delete Review (Admin)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/reviews/1",
              "host": ["{{baseUrl}}"],
              "path": ["reviews", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Cars & Locations",
      "item": [
        {
          "name": "Add Location",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"city\": \"Pune\",\n  \"address\": \"123 Airport Road\",\n  \"latitude\": \"18.5204\",\n  \"longitude\": \"73.8567\",\n  \"phone\": \"+91-2012345678\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/locations",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "locations"]
            }
          }
        },
        {
          "name": "Add Car",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"make\": \"Honda\",\n  \"model\": \"City\",\n  \"year\": 2022,\n  \"category\": \"Sedan\",\n  \"color\": \"White\",\n  \"registration_number\": \"MH01AB1234\",\n  \"vin\": \"1HGCM82633A123456\",\n  \"daily_rate\": 1800.00,\n  \"location_id\": 1,\n  \"mileage\": 15000,\n  \"transmission\": \"Automatic\",\n  \"fuel_type\": \"Petrol\",\n  \"seats\": 5,\n  \"features\": [\"AC\", \"Power Steering\", \"Power Windows\", \"Central Locking\", \"Airbags\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/cars",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cars"]
            }
          }
        },
        {
          "name": "Get All Cars (Admin)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/cars",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cars"]
            }
          }
        },
        {
          "name": "Update Car",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"daily_rate\": 2000.00,\n  \"status\": \"available\",\n  \"mileage\": 16500,\n  \"features\": [\"AC\", \"Power Steering\", \"Power Windows\", \"Central Locking\", \"Airbags\", \"Bluetooth\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/cars/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cars", "1"]
            }
          }
        },
        {
          "name": "Upload Car Images",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "images",
                  "type": "file",
                  "src": "/path/to/car-image1.jpg"
                },
                {
                  "key": "images",
                  "type": "file",
                  "src": "/path/to/car-image2.jpg"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/cars/1/images",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cars", "1", "images"]
            }
          }
        },
        {
          "name": "Delete Car Image",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/cars/images/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cars", "images", "1"]
            }
          }
        },
        {
          "name": "Delete Car",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/cars/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cars", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Management",
      "item": [
        {
          "name": "Get All Bookings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/bookings",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "bookings"]
            }
          }
        },
        {
          "name": "Get Bookings with Filters",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/bookings?city=Mumbai&status=confirmed",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "bookings"],
              "query": [
                {
                  "key": "city",
                  "value": "Mumbai"
                },
                {
                  "key": "status",
                  "value": "confirmed"
                }
              ]
            }
          }
        },
        {
          "name": "Update Booking Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"confirmed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/bookings/{{bookingId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "bookings", "{{bookingId}}", "status"]
            }
          }
        },
        {
          "name": "Get All Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"]
            }
          }
        },
        {
          "name": "Activate User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {\n",
                  "    const response = pm.response.json();\n",
                  "    pm.test('User activated successfully', function () {\n",
                  "        pm.expect(response.success).to.be.true;\n",
                  "        pm.expect(response.data.IsActive).to.be.true;\n",
                  "    });\n",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{userId}}/activate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{userId}}", "activate"]
            }
          }
        },
        {
          "name": "Deactivate User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {\n",
                  "    const response = pm.response.json();\n",
                  "    pm.test('User deactivated successfully', function () {\n",
                  "        pm.expect(response.success).to.be.true;\n",
                  "        pm.expect(response.data.IsActive).to.be.false;\n",
                  "    });\n",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{userId}}/deactivate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{userId}}", "deactivate"]
            }
          }
        },
        {
          "name": "Toggle User Admin Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {\n",
                  "    const response = pm.response.json();\n",
                  "    pm.test('User role updated successfully', function () {\n",
                  "        pm.expect(response.success).to.be.true;\n",
                  "    });\n",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isAdmin\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{userId}}/role",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{userId}}", "role"]
            },
            "description": "Toggle a user's admin status. Set isAdmin to true to make a user an admin, or false to remove admin privileges."
          }
        },
        {
          "name": "Add Maintenance Log",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"car_id\": 1,\n  \"maintenance_type\": \"Regular Service\",\n  \"description\": \"Oil change and filter replacement\",\n  \"cost\": 3500,\n  \"maintenance_date\": \"2023-09-01\",\n  \"next_maintenance_date\": \"2023-12-01\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/maintenance",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "maintenance"]
            }
          }
        },
        {
          "name": "Get Car Maintenance History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/maintenance/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "maintenance", "1"]
            }
          }
        },
        {
          "name": "Update Maintenance Log",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"maintenance_type\": \"Service\",\n  \"description\": \"Full service and oil change\",\n  \"cost\": 4500,\n  \"maintenance_date\": \"2025-09-15\",\n  \"next_maintenance_date\": \"2025-12-15\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/maintenance/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "maintenance", "1"]
            }
          }
        },
        {
          "name": "Delete Maintenance Log",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/maintenance/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "maintenance", "1"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Invoices",
      "item": [
        {
          "name": "Generate Invoice",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices/{{bookingId}}",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "{{bookingId}}"]
            }
          }
        },
        {
          "name": "Get Invoice",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices/1",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "1"]
            }
          }
        },
        {
          "name": "Download Invoice (HTML)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{authToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices/1/download?format=html",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "1", "download"],
              "query": [
                {
                  "key": "format",
                  "value": "html"
                }
              ]
            }
          }
        },
        {
          "name": "Get All Invoices",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices",
              "host": ["{{baseUrl}}"],
              "path": ["invoices"]
            }
          }
        },
        {
          "name": "Update Invoice Status",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"paid\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/invoices/1/status",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "1", "status"]
            }
          }
        },
        {
          "name": "Send Invoice Email",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"recipientEmail\": \"customer@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/invoices/1/send",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "1", "send"]
            }
          }
        },
        {
          "name": "Regenerate PDF",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices/1/regenerate-pdf",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "1", "regenerate-pdf"]
            }
          }
        },
        {
          "name": "Check PDF Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/invoices/1/pdf-status",
              "host": ["{{baseUrl}}"],
              "path": ["invoices", "1", "pdf-status"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Dashboard",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/dashboard/stats",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "dashboard", "stats"]
            }
          }
        },
        {
          "name": "Get Recent Activity",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/dashboard/recent-activity",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "dashboard", "recent-activity"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Reports",
      "item": [
        {
          "name": "Monthly Bookings Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/reports/bookings?month=9&year=2025",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "reports", "bookings"],
              "query": [
                {
                  "key": "month",
                  "value": "9"
                },
                {
                  "key": "year",
                  "value": "2025"
                }
              ]
            }
          }
        },
        {
          "name": "Revenue Report by City",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/reports/revenue?city=Mumbai&month=9&year=2025",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "reports", "revenue"],
              "query": [
                {
                  "key": "city",
                  "value": "Mumbai"
                },
                {
                  "key": "month",
                  "value": "9"
                },
                {
                  "key": "year",
                  "value": "2025"
                }
              ]
            }
          }
        },
        {
          "name": "Revenue Report All Cities",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/reports/revenue?month=9&year=2025",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "reports", "revenue"],
              "query": [
                {
                  "key": "month",
                  "value": "9"
                },
                {
                  "key": "year",
                  "value": "2025"
                }
              ]
            }
          }
        },
        {
          "name": "Export Bookings Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/reports/export/bookings?month=9&year=2025&format=csv",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "reports", "export", "bookings"],
              "query": [
                {
                  "key": "month",
                  "value": "9"
                },
                {
                  "key": "year",
                  "value": "2025"
                },
                {
                  "key": "format",
                  "value": "csv"
                }
              ]
            }
          }
        },
        {
          "name": "Export Revenue Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/reports/export/revenue?month=9&year=2025&format=excel",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "reports", "export", "revenue"],
              "query": [
                {
                  "key": "month",
                  "value": "9"
                },
                {
                  "key": "year",
                  "value": "2025"
                },
                {
                  "key": "format",
                  "value": "excel"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Utilities",
      "item": [
        {
          "name": "Test Database Data",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{adminToken}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/test/database",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "test", "database"]
            }
          }
        }
      ]
    }
  ]
}